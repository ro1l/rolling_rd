"use strict";(self["webpackChunkrolling"]=self["webpackChunkrolling"]||[]).push([[43],{7043:function(r,t,e){e.r(t),e.d(t,{default:function(){return R}});var s=e(6252),l=e(3577);const o={class:"order-box"},a=(0,s._)("header",{class:"order-bg"},[(0,s._)("p",{class:"logo"},"Rolling"),(0,s._)("div",{class:"title"},[(0,s._)("h1",null,"訂單明細")])],-1),d={class:"order"},n={class:"products order-bg"},i=(0,s._)("caption",{class:"text-shallow"},"商品明細",-1),u=(0,s._)("thead",null,[(0,s._)("tr",{class:"order-bg"},[(0,s._)("th",{class:"order-bg"},"品名"),(0,s._)("th",{class:"order-bg"},"數量"),(0,s._)("th",{class:"order-bg"},"金額")])],-1),c=(0,s._)("th",{class:"bg-color"},null,-1),_=(0,s._)("th",{class:"bg-color"},"總計",-1),h={class:"bg-color"},g={class:"user"},p=(0,s._)("caption",{class:"text-shallow"},"訂購人資訊",-1),b={class:"item-underline"},w=(0,s._)("th",null,"姓名",-1),m={class:"item-underline"},y=(0,s._)("th",null,"手機",-1),k={class:"item-underline"},f=(0,s._)("th",null,"姓名",-1),v={class:"item-underline"},z=(0,s._)("th",null,"電子郵件",-1),D={class:"item-underline"},x=(0,s._)("th",null,"寄送地址",-1),L={class:"item-underline"},$=(0,s._)("th",null,"備註",-1),I={key:0},O={key:1},S={key:0,class:"item-underline"},j=(0,s._)("th",null,"付款狀態",-1),W=(0,s._)("td",null,"付款完成",-1),Z=[j,W],q={key:0,class:"button-box"},C=(0,s._)("button",{class:"pay fill-btn"},"確認付款",-1),E=[C],H={key:1,class:"button-box"},M={type:"button",class:"home"};function N(r,t,e,j,W,C){const N=(0,s.up)("router-link"),T=(0,s.up)("Form"),Y=(0,s.up)("Loading");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",o,[a,(0,s._)("div",d,[(0,s.Wm)(T,{onSubmit:C.payOrder},{default:(0,s.w5)((()=>[(0,s._)("table",n,[i,u,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(W.order.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"item-underline"},[(0,s._)("td",null,(0,l.zw)(t.product.title),1),(0,s._)("td",null,(0,l.zw)(t.qty)+(0,l.zw)(t.product.unit),1),(0,s._)("td",null,"NT$"+(0,l.zw)(r.$filters.currency(t.product.price)),1)])))),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[c,_,(0,s._)("th",h,"NT$"+(0,l.zw)(r.$filters.currency(W.order.total)),1)])])]),(0,s._)("table",g,[p,(0,s._)("tbody",null,[(0,s._)("tr",b,[w,(0,s._)("td",null,(0,l.zw)(W.order.user.name),1)]),(0,s._)("tr",m,[y,(0,s._)("td",null,(0,l.zw)(W.order.user.tel),1)]),(0,s._)("tr",k,[f,(0,s._)("td",null,(0,l.zw)(W.order.user.name),1)]),(0,s._)("tr",v,[z,(0,s._)("td",null,(0,l.zw)(W.order.user.email),1)]),(0,s._)("tr",D,[x,(0,s._)("td",null,(0,l.zw)(W.order.user.address),1)]),(0,s._)("tr",L,[$,W.order.message>0?((0,s.wg)(),(0,s.iD)("td",I,(0,l.zw)(W.order.message),1)):((0,s.wg)(),(0,s.iD)("td",O,"無備註"))]),!0===W.order.is_paid?((0,s.wg)(),(0,s.iD)("tr",S,Z)):(0,s.kq)("",!0)])]),!1===W.order.is_paid?((0,s.wg)(),(0,s.iD)("div",q,E)):((0,s.wg)(),(0,s.iD)("div",H,[(0,s._)("button",M,[(0,s.Wm)(N,{to:{name:"home"},class:"border-btn"},{default:(0,s.w5)((()=>[(0,s.Uk)(" 回首頁 ")])),_:1})])]))])),_:1},8,["onSubmit"])])]),(0,s.Wm)(Y,{active:W.isLoading},null,8,["active"])],64)}var T=e(6154),Y={data(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{async getOrder(){this.isLoading=!0;const r=`https://vue3-course-api.hexschool.io/api/je-api/order/${this.orderId}`;try{const t=await T.Z.get(r);this.isLoading=!1,this.order=t.data.order}catch(t){console.error("Error 找不到資料",t)}},async payOrder(){this.isLoading=!0;const r=`https://vue3-course-api.hexschool.io/api/je-api/pay/${this.orderId}`;try{const t=await T.Z.post(r);this.isLoading=!1,t.data.success&&(this.getOrder(),this.pushMessageState(t))}catch(t){console.error("Error 找不到資料",t)}}},created(){this.orderId=this.$route.params.orderId,this.getOrder()},inject:["pushMessageState"]},F=e(3744);const K=(0,F.Z)(Y,[["render",N]]);var R=K}}]);
//# sourceMappingURL=43.50468406.js.map